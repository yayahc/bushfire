<h1>Simulation Detail</h1>
<p>Title: {{ simulation.name }}</p>

<h2>Graphics:</h2>
<p id="urls" style="display: none;">{{ urls }}</p>
    
{% if urls %}
<div id="slideshow">
    <img id="image" src="" alt="Image">
</div>
<button id="pauseButton">Pause</button>
{% endif %}

<script>
   // Replace 'directoryPath' with the path to your image directory
   var directoryPath = document.getElementById('urls').textContent;
   console.log(directoryPath);
        var imagePaths = [];

        // Function to fetch all image file paths in the directory
        function fetchImagePaths() {
            fetch(directoryPath)
                .then(response => response.text())
                .then(data => {
                    imagePaths = data.split('|').filter(Boolean); // Split the string into an array
                    if (imagePaths.length > 0) {
                        changeImage();
                    }
                });
        }

        console.log(imagePaths)

        var currentImageIndex = 0;
        var imageElement = document.getElementById('image');
        var pauseButton = document.getElementById('pauseButton');
        var isPaused = false;

        function changeImage() {
            if (!isPaused) {
                imageElement.src = directoryPath + imagePaths[currentImageIndex];
                currentImageIndex = (currentImageIndex + 1) % imagePaths.length;
            }
        }

        fetchImagePaths(); // Fetch image paths when the page loads

        setInterval(changeImage, 1000);

        // Add click event to pause button
        pauseButton.addEventListener('click', function () {
            isPaused = !isPaused;
            pauseButton.textContent = isPaused ? 'Play' : 'Pause';
        });
</script>
